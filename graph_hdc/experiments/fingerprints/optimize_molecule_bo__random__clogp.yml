# PyComex configuration file for CLogP optimization using Random Baseline with Bayesian Optimization
pycomex: true

extend: optimize_molecule_bo__random.py

include: mixin_clogp.py

name: optimize_bo_random_aqsoldb_clogp

description: |
  Random Baseline for Bayesian Optimization molecular search on CLogP prediction.

  This experiment uses the AqSolDB dataset structure but optimizes for CLogP
  (calculated LogP) values computed via RDKit's Crippen method instead of the
  default logS (aqueous solubility) values.

  Random Baseline Purpose:
  - Each molecule is assigned a random vector (no structural information)
  - Provides lower bound for comparison with HDC/fingerprint methods
  - If structured methods perform similarly to random, they're not learning
  - AUC difference quantifies value of molecular representations

  Key features:
  - Random Gaussian N(0,1) vectors for molecular representation
  - Same dimensionality as HDC/fingerprints for fair comparison
  - Bayesian Optimization with Gaussian Process models from BotTorch
  - Multiple independent trials for robust performance evaluation
  - Identical BO configuration to other methods

  The mixin_clogp.py calculates CLogP values for all molecules and replaces the
  graph_labels, which are then used as the target property for optimization.

  Expected Outcome:
  - Random baseline should converge slower than structured representations
  - If random performs well, it suggests the dataset is too easy or GP is overfitting
  - Comparison quantifies how much molecular structure helps BO

parameters:
  SEED: 1

  # Dataset configuration
  DATASET_NAME: "aqsoldb"
  DATASET_NAME_ID: "aqsoldb_clogp_bo_random"
  NUM_DATA: null  # Use full dataset
  NUM_HOLDOUT: 0.1  # Hold out 10% for final evaluation

  # Target property
  TARGET_INDEX: 0  # First (and only) target after mixin replaces labels with CLogP
  TARGET_VALUE: 15.0  # Target CLogP value to search for
  TARGET_MODE: "minimize_distance"  # Minimize distance to target value

  # Random representation parameters
  RANDOM_DIM: 64  # Match HDC/fingerprint dimensionality
  RANDOM_SEED: null  # Use main experiment seed
  RANDOM_DISTRIBUTION: "normal"  # Gaussian N(0,1)

  # Bayesian Optimization parameters
  NUM_INITIAL_SAMPLES: 20  # Random molecules to start with
  NUM_BO_ROUNDS: 25  # Number of BO iterations
  NUM_SAMPLES_PER_ROUND: 3  # Molecules to select each round
  NUM_TRIALS: 25  # Independent runs for averaging

  # Acquisition function configuration
  ACQUISITION_FUNCTION: "EI"  # Expected Improvement (or "UCB", "PI")
  UCB_BETA: 2.0  # Exploration parameter for UCB (only used if ACQUISITION_FUNCTION="UCB")

  # GP configuration
  GP_NOISE_CONSTRAINT: 0.0001  # Lower bound for observation noise
  NORMALIZE_REPRESENTATIONS: true  # Standardize features for better GP fitting
  USE_PCA_COMPRESSION: false  # No PCA compression needed
  PCA_COMPONENTS: 50  # Only used if USE_PCA_COMPRESSION=true

  # Visualization
  PLOT_INDIVIDUAL_TRIALS: true  # Plot each trial's trajectory
  PLOT_GP_POSTERIOR: false  # Skip GP posterior plots (can be slow)
  NUM_BEST_MOLECULES_TO_SHOW: 5  # Number of best molecules to visualize

  # Comparison metrics
  METRICS_THRESHOLD: 0.5  # Threshold for convergence speed metric

  # Note for experiment tracking
  NOTE: |
    Random baseline experiment for CLogP molecular search.
    Uses random Gaussian vectors to establish performance lower bound.
    Compare AUC with HDC/fingerprint methods to quantify representation value.

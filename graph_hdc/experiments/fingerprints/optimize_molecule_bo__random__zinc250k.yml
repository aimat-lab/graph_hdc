# PyComex configuration file for ZINC250k QED optimization using Random Baseline with Bayesian Optimization
pycomex: true

extend: optimize_molecule_bo__random.py

name: optimize_bo_random_zinc250k_qed

description: |
  Random Baseline for Bayesian Optimization molecular search on ZINC250k QED property.

  This experiment uses the ZINC250k dataset which contains ~250k drug-like molecules
  with multiple computed properties. The target property is QED (Quantitative Estimate
  of Drug-likeness) at index 1, which ranges from 0 to 1 with higher values indicating
  more drug-like molecules.

  Random Baseline Purpose:
  - Each molecule is assigned a random vector (no structural information)
  - Provides lower bound for comparison with HDC/fingerprint methods
  - If structured methods perform similarly to random, they're not learning
  - AUC difference quantifies value of molecular representations

  Key features:
  - Random Gaussian N(0,1) vectors for molecular representation
  - Same dimensionality as HDC/fingerprints (2048D) for fair comparison
  - Bayesian Optimization with Gaussian Process models from BotTorch
  - Multiple independent trials for robust performance evaluation
  - Identical BO configuration to other methods

  Note: ZINC250k is a large dataset. We subsample to make BO tractable.

  Expected Outcome:
  - Random baseline should converge slower than structured representations
  - If random performs well, it suggests the dataset is too easy or GP is overfitting
  - Comparison quantifies how much molecular structure helps BO

parameters:
  SEED: 1

  # Dataset configuration
  DATASET_NAME: "zinc250k"
  DATASET_NAME_ID: "zinc250k_qed_bo_random"
  NUM_DATA: null  # Subsample for tractable BO (full dataset is ~250k)
  NUM_HOLDOUT: 0.0  # Hold out 10% for final evaluation

  # Target property - QED (Quantitative Estimate of Drug-likeness)
  TARGET_INDEX: 1  # QED property
  TARGET_VALUE: 0.2  # Target high drug-likeness
  TARGET_MODE: "minimize_distance"  # Minimize distance to target value

  # Random representation parameters
  RANDOM_DIM: 64  # Match HDC/fingerprint dimensionality for fair comparison
  RANDOM_SEED: null  # Use main experiment seed
  RANDOM_DISTRIBUTION: "normal"  # Gaussian N(0,1)

  # Bayesian Optimization parameters
  NUM_INITIAL_SAMPLES: 20  # Random molecules to start with
  NUM_BO_ROUNDS: 25  # Number of BO iterations
  NUM_SAMPLES_PER_ROUND: 3  # Molecules to select each round
  NUM_TRIALS: 10  # Independent runs for averaging

  # Acquisition function configuration
  ACQUISITION_FUNCTION: "EI"  # Expected Improvement (or "UCB", "PI")
  UCB_BETA: 2.0  # Exploration parameter for UCB (only used if ACQUISITION_FUNCTION="UCB")

  # GP configuration
  GP_NOISE_CONSTRAINT: 0.0001  # Lower bound for observation noise
  NORMALIZE_REPRESENTATIONS: true  # Standardize features for better GP fitting
  NORMALIZE_OUTPUTS: true  # Standardize y values for better GP fitting
  USE_PCA_COMPRESSION: false  # No PCA compression needed
  PCA_COMPONENTS: 50  # Only used if USE_PCA_COMPRESSION=true

  # Comparison metrics
  METRICS_THRESHOLD: 0.05  # Threshold for "rounds to threshold" metric (QED units)

  # Visualization
  PLOT_INDIVIDUAL_TRIALS: true  # Plot each trial's trajectory
  PLOT_GP_POSTERIOR: false  # Skip GP posterior plots (can be slow)
  NUM_BEST_MOLECULES_TO_SHOW: 5  # Number of best molecules to visualize

  # Note for experiment tracking
  NOTE: |
    Random baseline experiment for ZINC250k QED (drug-likeness) molecular search.
    Uses random Gaussian vectors (2048D) to establish performance lower bound.
    Compare AUC with HDC/fingerprint methods to quantify representation value.
